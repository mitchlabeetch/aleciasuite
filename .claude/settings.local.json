{
  "permissions": {
    "allow": [
      "mcp__acp__Edit",
      "mcp__acp__Bash",
      "mcp__acp__Write",
      "Bash(git fetch:*)",
      "Bash(git pull:*)",
      "Bash(ls:*)",
      "WebFetch(domain:www.opensourcealternative.to)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:codepen.io)",
      "WebSearch",
      "mcp__plugin_playwright_playwright__browser_take_screenshot",
      "Bash(screencapture:*)",
      "mcp__plugin_playwright_playwright__browser_console_messages",
      "Bash(test:*)",
      "Bash(git ls-remote:*)",
      "Bash(cat:*)",
      "Bash(python3:*)",
      "Bash(pnpm --filter website build:*)",
      "Bash(pnpm install:*)",
      "Bash(# Check which component files have been recently modified \\(last 5 minutes\\) find /Users/utilisateur/Desktop/alepanel/apps/colab/app /Users/utilisateur/Desktop/alepanel/apps/colab/components -name \"\"*.tsx\"\" -name \"\"*.ts\"\" -newer /Users/utilisateur/Desktop/alepanel/apps/colab/package.json)",
      "Bash(# Check recently modified files with broader search find /Users/utilisateur/Desktop/alepanel/apps/colab -name \"\"*.tsx\"\" -o -name \"\"*.ts\"\" | xargs stat -f \"\"%m %N\"\")",
      "Bash(pnpm --filter colab typecheck:*)",
      "Bash(pnpm tsc:*)",
      "Bash(pnpm --filter colab tsc:*)",
      "Bash(pnpm --filter @alepanel/colab tsc:*)",
      "Bash(pnpm --filter colab run build:*)",
      "Bash(pnpm --filter colab exec tsc:*)",
      "Bash(pnpm --filter colab exec rm:*)",
      "Bash(pnpm --filter colab exec next build:*)",
      "Bash(pnpm --filter colab type-check:*)",
      "Bash(pnpm exec tsc:*)",
      "Bash(npx tsc:*)",
      "Bash(pnpm --filter colab build:*)",
      "Bash(find:*)",
      "Bash(npx tsx:*)",
      "Bash(pnpm --filter @alecia/flows-pieces build:*)",
      "Bash(chmod:*)",
      "Bash(/Users/utilisateur/Desktop/alepanel/scripts/build-services.sh:*)",
      "Bash(done)",
      "Bash(pnpm run build)",
      "Bash(pnpm build:*)",
      "Bash(pnpm run tsc:*)",
      "Bash(docker build:*)",
      "Bash(sshpass -p '0akNPw8LUX6RN8pC' ssh -o StrictHostKeyChecking=no ubuntu@51.255.194.94 'uname -a && free -h && df -h / && docker --version 2>/dev/null || echo \"\"Docker not installed\"\"')",
      "Bash(expect:*)",
      "Bash(/tmp/fix-env-production.sh << 'SCRIPT'\n#!/bin/bash\nset -euo pipefail\n\necho \"ðŸ” GÃ©nÃ©ration des secrets de production...\"\n\n# Generate all secrets\nPOSTGRES_PASSWORD=$\\(openssl rand -hex 32\\)\nREDIS_PASSWORD=$\\(openssl rand -hex 32\\)\nMINIO_ROOT_USER=\"alecia-admin\"\nMINIO_ROOT_PASSWORD=$\\(openssl rand -hex 32\\)\nBETTER_AUTH_SECRET=$\\(openssl rand -hex 32\\)\nTOKEN_ENCRYPTION_KEY=$\\(openssl rand -hex 32\\)\n\n# Strapi secrets \\(4 keys format: key1,key2,key3,key4\\)\nSTRAPI_JWT_SECRET=$\\(openssl rand -hex 32\\)\nSTRAPI_ADMIN_JWT_SECRET=$\\(openssl rand -hex 32\\)\nSTRAPI_APP_KEYS=\"$\\(openssl rand -hex 16\\),$\\(openssl rand -hex 16\\),$\\(openssl rand -hex 16\\),$\\(openssl rand -hex 16\\)\"\nSTRAPI_API_TOKEN_SALT=$\\(openssl rand -hex 16\\)\n\n# Activepieces secrets\nAP_ENCRYPTION_KEY=$\\(openssl rand -hex 32\\)\nAP_JWT_SECRET=$\\(openssl rand -hex 32\\)\n\n# Other services\nPLAUSIBLE_SECRET_KEY_BASE=$\\(openssl rand -hex 64\\)\nMINIFLUX_ADMIN_PASSWORD=$\\(openssl rand -hex 16\\)\nDOCUSEAL_SECRET_KEY_BASE=$\\(openssl rand -hex 64\\)\nVAULTWARDEN_ADMIN_TOKEN=$\\(openssl rand -hex 32\\)\nSTIRLING_PASSWORD=$\\(openssl rand -hex 16\\)\n\necho \"âœ… Secrets gÃ©nÃ©rÃ©s\"\necho \"ðŸ“ CrÃ©ation du fichier .env...\"\n\ncat > .env << EOF\n# ============================================\n# ALECIA SUITE - PRODUCTION CONFIGURATION\n# Generated: $\\(date -u +\"%Y-%m-%d %H:%M:%S UTC\"\\)\n# ============================================\n\n# === PostgreSQL ===\nPOSTGRES_PASSWORD=${POSTGRES_PASSWORD}\nDATABASE_URL=postgresql://alecia:${POSTGRES_PASSWORD}@postgres:5432/alecia\n\n# === Redis ===\nREDIS_PASSWORD=${REDIS_PASSWORD}\nREDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379\n\n# === Minio S3 ===\nMINIO_ROOT_USER=${MINIO_ROOT_USER}\nMINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD}\n\n# === BetterAuth ===\nBETTER_AUTH_SECRET=${BETTER_AUTH_SECRET}\nBETTER_AUTH_URL=https://app.alecia.markets\nBETTER_AUTH_COOKIE_DOMAIN=.alecia.markets\nTOKEN_ENCRYPTION_KEY=${TOKEN_ENCRYPTION_KEY}\nNEXTAUTH_SECRET=${BETTER_AUTH_SECRET}\n\n# === Strapi CMS ===\nSTRAPI_JWT_SECRET=${STRAPI_JWT_SECRET}\nSTRAPI_ADMIN_JWT_SECRET=${STRAPI_ADMIN_JWT_SECRET}\nSTRAPI_APP_KEYS=${STRAPI_APP_KEYS}\nSTRAPI_API_TOKEN_SALT=${STRAPI_API_TOKEN_SALT}\n\n# === Activepieces ===\nAP_ENCRYPTION_KEY=${AP_ENCRYPTION_KEY}\nAP_JWT_SECRET=${AP_JWT_SECRET}\n\n# === Plausible Analytics ===\nPLAUSIBLE_SECRET_KEY_BASE=${PLAUSIBLE_SECRET_KEY_BASE}\n\n# === Miniflux RSS ===\nMINIFLUX_ADMIN_USERNAME=admin\nMINIFLUX_ADMIN_PASSWORD=${MINIFLUX_ADMIN_PASSWORD}\n\n# === DocuSeal ===\nDOCUSEAL_SECRET_KEY_BASE=${DOCUSEAL_SECRET_KEY_BASE}\n\n# === Vaultwarden ===\nVAULTWARDEN_ADMIN_TOKEN=${VAULTWARDEN_ADMIN_TOKEN}\n\n# === Stirling PDF ===\nSTIRLING_PASSWORD=${STIRLING_PASSWORD}\n\n# === Domain & URLs ===\nDOMAIN=alecia.markets\nNEXT_PUBLIC_APP_URL=https://app.alecia.markets\nNEXT_PUBLIC_CMS_URL=https://cms.alecia.markets\nNEXT_PUBLIC_S3_URL=https://s3.alecia.markets\n\n# === Node Environment ===\nNODE_ENV=production\nEOF\n\necho \"âœ… Fichier .env crÃ©Ã© avec $\\(wc -l < .env\\) lignes\"\necho \"\"\necho \"ðŸ“‹ Secrets admin importants \\(SAUVEGARDER\\):\"\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\necho \"PostgreSQL Password: ${POSTGRES_PASSWORD}\"\necho \"Redis Password: ${REDIS_PASSWORD}\"\necho \"Minio User: ${MINIO_ROOT_USER}\"\necho \"Minio Password: ${MINIO_ROOT_PASSWORD}\"\necho \"Miniflux Admin: admin / ${MINIFLUX_ADMIN_PASSWORD}\"\necho \"Stirling PDF Password: ${STIRLING_PASSWORD}\"\necho \"Vaultwarden Admin Token: ${VAULTWARDEN_ADMIN_TOKEN}\"\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\nSCRIPT)",
      "Bash(__NEW_LINE_721e2203836dfedf__ chmod +x /tmp/fix-env-production.sh)",
      "Bash(scp:*)",
      "Bash(/tmp/regenerate-env-and-deploy.exp << 'EOF'\n#!/usr/bin/expect -f\nset timeout 180\n\nspawn ssh -o StrictHostKeyChecking=no ubuntu@51.255.194.94\nexpect \"password:\"\nsend \"0akNPw8LUX6RN8pC\\\\r\"\nexpect \"ubuntu@vps\"\n\nsend \"cd ~/alecia/alepanel\\\\r\"\nexpect \"alepanel\"\n\nsend \"echo 'ðŸ” GÃ©nÃ©ration des secrets de production...'\\\\r\"\nexpect \"alepanel\"\n\n# Generate all secrets inline\nsend \"cat > .env << 'ENVFILE'\\\\r\"\nsend \"# ALECIA SUITE - PRODUCTION CONFIGURATION\\\\r\"\nsend \"# Generated: $\\(date -u +\\\\\"%Y-%m-%d %H:%M:%S UTC\\\\\"\\)\\\\r\"\nsend \"\\\\r\"\nsend \"# === PostgreSQL ===\\\\r\"\nsend \"POSTGRES_PASSWORD=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"DATABASE_URL=postgresql://alecia:\\\\$\\(grep POSTGRES_PASSWORD .env | cut -d= -f2\\)@postgres:5432/alecia\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Redis ===\\\\r\"\nsend \"REDIS_PASSWORD=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"REDIS_URL=redis://:\\\\$\\(grep REDIS_PASSWORD .env | cut -d= -f2\\)@redis:6379\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Minio S3 ===\\\\r\"\nsend \"MINIO_ROOT_USER=alecia-admin\\\\r\"\nsend \"MINIO_ROOT_PASSWORD=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === BetterAuth ===\\\\r\"\nsend \"BETTER_AUTH_SECRET=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"BETTER_AUTH_URL=https://app.alecia.markets\\\\r\"\nsend \"BETTER_AUTH_COOKIE_DOMAIN=.alecia.markets\\\\r\"\nsend \"TOKEN_ENCRYPTION_KEY=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"NEXTAUTH_SECRET=\\\\$\\(grep BETTER_AUTH_SECRET .env | cut -d= -f2\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Strapi CMS ===\\\\r\"\nsend \"STRAPI_JWT_SECRET=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"STRAPI_ADMIN_JWT_SECRET=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"STRAPI_APP_KEYS=$\\(openssl rand -hex 16\\),$\\(openssl rand -hex 16\\),$\\(openssl rand -hex 16\\),$\\(openssl rand -hex 16\\)\\\\r\"\nsend \"STRAPI_API_TOKEN_SALT=$\\(openssl rand -hex 16\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Activepieces ===\\\\r\"\nsend \"AP_ENCRYPTION_KEY=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"AP_JWT_SECRET=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Plausible Analytics ===\\\\r\"\nsend \"PLAUSIBLE_SECRET_KEY_BASE=$\\(openssl rand -hex 64\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Miniflux RSS ===\\\\r\"\nsend \"MINIFLUX_ADMIN_USERNAME=admin\\\\r\"\nsend \"MINIFLUX_ADMIN_PASSWORD=$\\(openssl rand -hex 16\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === DocuSeal ===\\\\r\"\nsend \"DOCUSEAL_SECRET_KEY_BASE=$\\(openssl rand -hex 64\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Vaultwarden ===\\\\r\"\nsend \"VAULTWARDEN_ADMIN_TOKEN=$\\(openssl rand -hex 32\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Stirling PDF ===\\\\r\"\nsend \"STIRLING_PASSWORD=$\\(openssl rand -hex 16\\)\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Domain & URLs ===\\\\r\"\nsend \"DOMAIN=alecia.markets\\\\r\"\nsend \"NEXT_PUBLIC_APP_URL=https://app.alecia.markets\\\\r\"\nsend \"NEXT_PUBLIC_CMS_URL=https://cms.alecia.markets\\\\r\"\nsend \"NEXT_PUBLIC_S3_URL=https://s3.alecia.markets\\\\r\"\nsend \"\\\\r\"\nexpect \">\"\nsend \"# === Node Environment ===\\\\r\"\nsend \"NODE_ENV=production\\\\r\"\nsend \"ENVFILE\\\\r\"\nexpect \"alepanel\"\n\nsend \"echo 'âœ… Fichier .env crÃ©Ã©'\\\\r\"\nsend \"wc -l .env\\\\r\"\nexpect \"alepanel\"\n\nsend \"exit\\\\r\"\nexpect eof\nEOF)",
      "Bash(__NEW_LINE_f732fb69661385be__ chmod +x /tmp/regenerate-env-and-deploy.exp)"
    ]
  }
}
