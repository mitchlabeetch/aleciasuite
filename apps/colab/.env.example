# ==============================================================================
# Alecia Colab (Collaborative Workspace) Environment Configuration
# ==============================================================================
# This file contains all environment variables required for the colab app.
# Copy this file to .env.local and fill in your actual values.
#
# IMPORTANT: This app is part of the monorepo. For local development, you may
# also need to configure variables at the root level.
# ==============================================================================

# ==============================================================================
# CORE CONFIGURATION
# ==============================================================================

# Node Environment (development, production, test)
NODE_ENV=development

# ==============================================================================
# DATABASE & CACHING
# ==============================================================================

# PostgreSQL Database Connection String
# Format: postgresql://username:password@host:port/database
# Local dev: postgresql://alecia:password@localhost:5432/alecia
# Production: postgresql://alecia:${POSTGRES_PASSWORD}@alecia-postgres:5432/alecia
DATABASE_URL=postgresql://alecia:password@localhost:5432/alecia

# Redis Connection String (for caching and sessions)
# Format: redis://:password@host:port
# Local dev: redis://:password@localhost:6379
# Production: redis://:${REDIS_PASSWORD}@alecia-redis:6379
REDIS_URL=redis://:password@localhost:6379

# ==============================================================================
# AUTHENTICATION (NextAuth / Better Auth)
# ==============================================================================

# NextAuth URL (colab site URL)
# Local dev: http://localhost:3001
# Production: https://colab.alecia.markets
NEXTAUTH_URL=http://localhost:3001

# NextAuth Secret (for session encryption)
# Generate with: openssl rand -base64 32
# IMPORTANT: Must be at least 32 characters long
# NOTE: Should match the website app for unified authentication
NEXTAUTH_SECRET=changeme_nextauth_secret_minimum_32_characters_required

# Better Auth Secret (for enhanced authentication)
# Generate with: openssl rand -base64 32
# IMPORTANT: Must be at least 32 characters long
# NOTE: Should match the website app for unified authentication
BETTER_AUTH_SECRET=changeme_better_auth_secret_minimum_32_characters_required

# Better Auth URL (main auth service URL)
# Production: https://alecia.markets
# Local dev: http://localhost:3000 (points to main website)
BETTER_AUTH_URL=http://localhost:3000

# ==============================================================================
# MINIO (S3-compatible object storage)
# ==============================================================================

# MinIO Configuration (for file uploads and document storage)
# Local dev: http://localhost:9000
# Production: http://alecia-minio:9000 (internal) or https://s3.alecia.markets (external)
MINIO_ENDPOINT=http://localhost:9000
MINIO_ROOT_USER=alecia
MINIO_ROOT_PASSWORD=changeme_minio_password_here
MINIO_BUCKET=alecia-colab

# ==============================================================================
# HOCUSPOCUS (Collaborative Editing Server)
# ==============================================================================

# HocusPocus WebSocket URL (for real-time collaboration)
# Local dev: ws://localhost:1234
# Production: ws://alecia-hocuspocus:1234 (internal) or wss://collab-ws.alecia.markets (external)
NEXT_PUBLIC_HOCUSPOCUS_URL=ws://localhost:1234

# ==============================================================================
# INTER-SERVICE COMMUNICATION
# ==============================================================================

# Alecia Website URL (for cross-app navigation)
# Local dev: http://localhost:3000
# Production: https://alecia.markets
NEXT_PUBLIC_ALECIA_MARKETING_URL=http://localhost:3000

# Alecia Colab Public URL (for sharing links)
# Local dev: http://localhost:3001
# Production: https://colab.alecia.markets
NEXT_PUBLIC_ALECIA_COLAB_URL=http://localhost:3001

# ==============================================================================
# SENTRY ERROR TRACKING (Optional)
# ==============================================================================

# Sentry DSN for error tracking
# Obtain from: https://sentry.io/ > Your Project > Settings > Client Keys (DSN)
# Leave empty to disable Sentry
# NOTE: Can be the same Sentry project as website or a separate one
# NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ==============================================================================
# ASSET CONFIGURATION (Optional)
# ==============================================================================

# Asset Prefix (for CDN deployment)
# Used when serving static assets from a CDN
# NEXT_PUBLIC_ASSET_PREFIX=https://cdn.alecia.markets

# ==============================================================================
# LEGACY / DEPRECATED (Keep for compatibility)
# ==============================================================================

# Convex (if migrating from Convex to direct DB access)
# NEXT_PUBLIC_CONVEX_URL=https://your-convex-deployment.convex.cloud

# ==============================================================================
# DEVELOPMENT & TESTING
# ==============================================================================

# CI Environment (set by CI/CD systems)
# CI=true

# ==============================================================================
# ARCHITECTURE NOTES
# ==============================================================================
# The Colab app is designed for:
# - Collaborative document editing (via HocusPocus + Tiptap)
# - Real-time workspace collaboration
# - Document storage and sharing (via MinIO)
# - Unified authentication with main website app
#
# Key Dependencies:
# - PostgreSQL: Stores document metadata, user permissions, workspace data
# - Redis: Handles session storage, real-time presence, caching
# - HocusPocus: WebSocket server for collaborative editing (Yjs CRDT)
# - MinIO: Object storage for document attachments and media
# ==============================================================================

# ==============================================================================
# QUICK START GUIDE
# ==============================================================================
# 1. Copy this file: cp .env.example .env.local
# 2. Generate secrets (use SAME secrets as website for unified auth):
#    - NEXTAUTH_SECRET: openssl rand -base64 32
#    - BETTER_AUTH_SECRET: openssl rand -base64 32
# 3. Set up local services:
#    - PostgreSQL (shared with website)
#    - Redis (shared with website)
#    - MinIO (shared with website)
#    - HocusPocus server (run from services/hocuspocus)
# 4. Update DATABASE_URL, REDIS_URL, MINIO_* with your local credentials
# 5. Ensure HocusPocus is running: cd services/hocuspocus && npm run dev
# 6. Run: npm run dev (starts on port 3001)
# ==============================================================================
