# infrastructure/miniflux/docker-compose.yml
# OPML feed import: Place opml-feeds.xml in this directory and import via UI
# at https://feeds.alecia.fr/settings/integrations after first login
services:
  miniflux:
    image: miniflux/miniflux:latest
    container_name: alecia-miniflux
    restart: unless-stopped
    environment:
      DATABASE_URL: postgres://alecia:${POSTGRES_PASSWORD}@alecia-postgres:5432/alecia?search_path=public
      RUN_MIGRATIONS: 1
      CREATE_ADMIN: 1
      ADMIN_USERNAME: ${MINIFLUX_ADMIN_USER}
      ADMIN_PASSWORD: ${MINIFLUX_ADMIN_PASSWORD}
      BASE_URL: https://feeds.alecia.fr
    volumes:
      - ./opml-feeds.xml:/opml-feeds.xml:ro
    ports:
      - "8080:8080"
