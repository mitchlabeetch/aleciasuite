# ==============================================================================
# Strapi CMS Environment Configuration
# ==============================================================================
# This file contains all environment variables required for Strapi CMS deployment.
# Copy this file to .env and fill in your actual values.
#
# Strapi Documentation: https://docs.strapi.io/dev-docs/configurations/environment
# ==============================================================================

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL Connection Details
# Used by Strapi to connect to the database
# Local dev: Use localhost or 127.0.0.1
# Production: Use service name from docker-compose (e.g., alecia-postgres)
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=strapi
DATABASE_USERNAME=alecia
DATABASE_PASSWORD=changeme_postgres_password_here

# Database Schema (optional, for multi-tenant setups)
# Default: public (PostgreSQL default schema)
# Production: alecia_cms (isolated schema for Strapi)
DATABASE_SCHEMA=public

# ==============================================================================
# STRAPI SECRETS (Critical Security Settings)
# ==============================================================================

# JWT Secret (for API token generation)
# Generate with: openssl rand -base64 32
# Used to sign JWT tokens for API authentication
STRAPI_JWT_SECRET=changeme_strapi_jwt_secret_here
JWT_SECRET=changeme_strapi_jwt_secret_here

# Admin JWT Secret (for admin panel authentication)
# Generate with: openssl rand -base64 32
# Used to sign JWT tokens for admin user sessions
STRAPI_ADMIN_JWT_SECRET=changeme_strapi_admin_jwt_secret_here
ADMIN_JWT_SECRET=changeme_strapi_admin_jwt_secret_here

# APP_KEYS (session encryption keys)
# IMPORTANT: Must be a comma-separated list of 4 base64-encoded strings
# Generate with: node -e "console.log([...Array(4)].map(() => require('crypto').randomBytes(16).toString('base64')).join(','))"
# Example format: "key1Base64==,key2Base64==,key3Base64==,key4Base64=="
# These keys are used for:
# - Session cookie encryption
# - Admin panel security
# - Response encryption
STRAPI_APP_KEYS=changeme_key1,changeme_key2,changeme_key3,changeme_key4
APP_KEYS=changeme_key1,changeme_key2,changeme_key3,changeme_key4

# API Token Salt (for generating API tokens)
# Generate with: openssl rand -base64 32
# Used to hash API tokens before storing in database
STRAPI_API_TOKEN_SALT=changeme_strapi_api_token_salt_here
API_TOKEN_SALT=changeme_strapi_api_token_salt_here

# Transfer Token Salt (for data transfer tokens)
# Generate with: openssl rand -base64 32
# Used for secure data transfer between Strapi instances
# TRANSFER_TOKEN_SALT=changeme_strapi_transfer_token_salt_here

# ==============================================================================
# MINIO / S3 UPLOAD CONFIGURATION
# ==============================================================================

# MinIO Configuration (S3-compatible storage for media uploads)
# Strapi uses this for storing uploaded files (images, documents, etc.)
#
# Local dev: http://localhost:9000
# Production: http://alecia-minio:9000 (internal Docker network)
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=alecia
MINIO_SECRET_KEY=changeme_minio_password_here
MINIO_BUCKET=strapi-uploads

# AWS S3 Compatible Settings (used by Strapi upload provider)
AWS_ACCESS_KEY_ID=alecia
AWS_ACCESS_SECRET=changeme_minio_password_here
AWS_REGION=us-east-1
AWS_BUCKET=strapi-uploads
AWS_ENDPOINT=http://localhost:9000

# ==============================================================================
# STRAPI APPLICATION SETTINGS
# ==============================================================================

# Admin Path (URL path for admin panel)
# Default: /admin
# Security tip: Change to a custom path in production
# ADMIN_PATH=/admin

# Public URL (for generating asset URLs)
# Local dev: http://localhost:1337
# Production: https://cms.alecia.markets
# PUBLIC_URL=http://localhost:1337

# Server Host and Port
# HOST=0.0.0.0
# PORT=1337

# ==============================================================================
# STRAPI TELEMETRY (Optional)
# ==============================================================================

# Disable usage reporting to Strapi (recommended for production)
# STRAPI_DISABLE_UPDATE_NOTIFICATION=true
# STRAPI_TELEMETRY_DISABLED=true

# ==============================================================================
# NODE ENVIRONMENT
# ==============================================================================

# Node environment (development, staging, production)
NODE_ENV=development

# ==============================================================================
# LOGGING (Optional)
# ==============================================================================

# Log level (fatal, error, warn, info, debug, trace, silent)
# LOG_LEVEL=info

# ==============================================================================
# CORS CONFIGURATION (Optional)
# ==============================================================================

# Allowed origins for CORS (comma-separated)
# Example: http://localhost:3000,http://localhost:3001,https://alecia.markets
# CORS_ORIGINS=http://localhost:3000

# ==============================================================================
# INITIAL SETUP INSTRUCTIONS
# ==============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Generate all secrets using the commands provided above
# 3. Update DATABASE_* variables with your PostgreSQL credentials
# 4. Update MINIO_* / AWS_* variables with your MinIO/S3 credentials
# 5. Start Strapi: npm run develop (dev) or npm run start (production)
# 6. Create admin user on first launch (web UI will prompt you)
# 7. Generate API token:
#    - Go to Settings > API Tokens > Create new API Token
#    - Name: "Frontend API Access"
#    - Token type: "Full Access" or "Custom" with appropriate permissions
#    - Copy the generated token
# 8. Add the token to your frontend .env files as STRAPI_API_TOKEN
# ==============================================================================

# ==============================================================================
# SECURITY BEST PRACTICES
# ==============================================================================
# - Always use strong, randomly generated secrets (minimum 32 characters)
# - Rotate secrets regularly in production
# - Use different secrets for different environments
# - Never commit .env files with real secrets to version control
# - Consider using a secret management service (e.g., AWS Secrets Manager, HashiCorp Vault)
# - Enable HTTPS in production
# - Restrict CORS origins to trusted domains
# - Regularly update Strapi and dependencies
# ==============================================================================

# ==============================================================================
# STRAPI APP_KEYS FORMAT REFERENCE
# ==============================================================================
# APP_KEYS must be exactly 4 comma-separated base64 strings.
# Each key should be 16 bytes encoded in base64 (results in 24 characters including ==).
#
# Generation examples:
#
# Method 1 (Node.js):
# node -e "console.log([...Array(4)].map(() => require('crypto').randomBytes(16).toString('base64')).join(','))"
#
# Method 2 (OpenSSL - run 4 times and join with commas):
# openssl rand -base64 16
#
# Expected format:
# APP_KEYS=AbC1234567890Def==,GhI0987654321Jkl==,MnO5678901234Pqr==,StU4321098765Vwx==
# ==============================================================================
