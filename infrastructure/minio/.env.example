# ==============================================================================
# MinIO (S3-Compatible Object Storage) Environment Configuration
# ==============================================================================
# This file contains all environment variables required for MinIO deployment.
# Copy this file to .env and fill in your actual values.
#
# MinIO Documentation: https://min.io/docs/minio/linux/reference/minio-server/minio-server.html
# ==============================================================================

# ==============================================================================
# MINIO ROOT CREDENTIALS
# ==============================================================================

# MinIO Root User (Access Key / Username)
# This is the main admin account for MinIO
# Can be any alphanumeric string (recommended: 5-20 characters)
# Default: minioadmin (change this!)
# Examples: alecia, admin, minio-admin
MINIO_ROOT_USER=alecia

# MinIO Root Password (Secret Key)
# This is the password for the root user account
# IMPORTANT: Must be at least 8 characters long (recommendation: 32+)
# Generate with: openssl rand -base64 32
MINIO_ROOT_PASSWORD=changeme_secure_minio_password_minimum_8_characters

# ==============================================================================
# MINIO PUBLIC ACCESS URLS
# ==============================================================================

# MinIO Server URL (public-facing API endpoint)
# This is the URL clients use to access the S3 API
# Local dev: http://localhost:9000
# Production: https://s3.alecia.markets (or https://s3.alecia.fr)
# IMPORTANT: Must be accessible by services that upload/download files
MINIO_SERVER_URL=http://localhost:9000

# MinIO Browser Redirect URL (web console)
# This is the URL for the MinIO web admin interface
# Local dev: http://localhost:9001
# Production: https://storage.alecia.markets (or https://console.s3.alecia.fr)
# The console runs on port 9001 by default
MINIO_BROWSER_REDIRECT_URL=http://localhost:9001

# ==============================================================================
# MINIO VOLUMES & STORAGE
# ==============================================================================

# MinIO Data Directory (where files are stored)
# In Docker: Usually /data (mapped to host volume)
# In Standalone: Specify local path (e.g., /mnt/minio-data)
# MINIO_VOLUMES=/data

# ==============================================================================
# MINIO REGION (Optional)
# ==============================================================================

# AWS Region (for S3 API compatibility)
# Default: us-east-1
# Only change if you have specific region requirements
# MINIO_REGION=us-east-1

# ==============================================================================
# MINIO DOMAIN (Optional, for virtual-hosted-style requests)
# ==============================================================================

# Domain for bucket virtual-hosted-style URLs
# Example: If MINIO_DOMAIN=s3.alecia.fr, buckets are accessible at:
# http://bucket-name.s3.alecia.fr instead of http://s3.alecia.fr/bucket-name
# MINIO_DOMAIN=s3.alecia.fr

# ==============================================================================
# MINIO BROWSER (Optional)
# ==============================================================================

# Enable/disable the web-based console
# Set to "off" to disable browser access (API only)
# Default: on
# MINIO_BROWSER=on

# ==============================================================================
# MINIO PROMETHEUS METRICS (Optional)
# ==============================================================================

# Enable Prometheus metrics endpoint
# MINIO_PROMETHEUS_AUTH_TYPE=public
# MINIO_PROMETHEUS_URL=http://localhost:9090
# MINIO_PROMETHEUS_JOB_ID=minio-job

# ==============================================================================
# MINIO LOGGING (Optional)
# ==============================================================================

# Enable audit logging (logs all API requests)
# MINIO_AUDIT_WEBHOOK_ENABLE=on
# MINIO_AUDIT_WEBHOOK_ENDPOINT=http://logs.alecia.markets/audit

# ==============================================================================
# MINIO NOTIFICATIONS (Optional)
# ==============================================================================

# Configure notifications for bucket events (uploads, deletes, etc.)
# Supported: webhook, AMQP, Kafka, MQTT, NATS, NSQ, Elasticsearch, PostgreSQL, MySQL, Redis
# Example: Webhook notifications
# MINIO_NOTIFY_WEBHOOK_ENABLE=on
# MINIO_NOTIFY_WEBHOOK_ENDPOINT=http://api.alecia.markets/webhooks/minio

# ==============================================================================
# MINIO IDENTITY & ACCESS (Optional)
# ==============================================================================

# LDAP/Active Directory Integration
# MINIO_IDENTITY_LDAP_SERVER_ADDR=ldap.alecia.markets:389
# MINIO_IDENTITY_LDAP_LOOKUP_BIND_DN=cn=admin,dc=alecia,dc=markets
# MINIO_IDENTITY_LDAP_LOOKUP_BIND_PASSWORD=ldap-password

# OpenID Connect (OIDC) Integration (e.g., Keycloak, Auth0)
# MINIO_IDENTITY_OPENID_CONFIG_URL=https://auth.alecia.markets/.well-known/openid-configuration
# MINIO_IDENTITY_OPENID_CLIENT_ID=minio-client
# MINIO_IDENTITY_OPENID_CLIENT_SECRET=minio-oidc-secret

# ==============================================================================
# MINIO ENCRYPTION (Optional)
# ==============================================================================

# Server-Side Encryption (SSE) with Key Management Service (KMS)
# MINIO_KMS_KES_ENDPOINT=https://kes.alecia.markets:7373
# MINIO_KMS_KES_KEY_NAME=minio-default-key
# MINIO_KMS_KES_CERT_FILE=/path/to/cert.pem
# MINIO_KMS_KES_KEY_FILE=/path/to/key.pem

# ==============================================================================
# DEPLOYMENT TYPES
# ==============================================================================

# MinIO supports different deployment modes:
# 1. Standalone (single server) - simplest, good for development/small deployments
# 2. Distributed (multiple servers) - high availability, production-grade
# 3. Gateway (legacy, deprecated) - use as gateway to other storage backends
#
# This configuration is for Standalone mode (default)

# ==============================================================================
# INITIAL SETUP INSTRUCTIONS
# ==============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Generate strong password:
#    MINIO_ROOT_PASSWORD: openssl rand -base64 32
# 3. Set MINIO_ROOT_USER (e.g., 'alecia')
# 4. Update MINIO_SERVER_URL and MINIO_BROWSER_REDIRECT_URL:
#    - Dev: http://localhost:9000 and http://localhost:9001
#    - Prod: https://s3.alecia.markets and https://storage.alecia.markets
# 5. Start MinIO:
#    Docker: docker-compose up -d
#    Standalone: minio server /data --console-address ":9001"
# 6. Access web console at MINIO_BROWSER_REDIRECT_URL
# 7. Create buckets for each service:
#    - strapi-uploads (for Strapi CMS media)
#    - alecia-uploads (for website uploads)
#    - alecia-colab (for colab documents)
#    - alecia-sign (for DocuSeal signatures)
# 8. Set bucket policies (public/private) as needed
# 9. Generate access keys for services:
#    - Console > Identity > Service Accounts > Create Service Account
#    - Use these keys in service configurations (not root credentials)
# ==============================================================================

# ==============================================================================
# BUCKET CONFIGURATION GUIDE
# ==============================================================================
# After MinIO is running, create these buckets:
#
# 1. strapi-uploads
#    - Purpose: Strapi CMS media files (images, videos, documents)
#    - Access: Private (authenticated access only)
#    - Versioning: Enabled (optional, for content recovery)
#
# 2. alecia-uploads
#    - Purpose: General website file uploads
#    - Access: Private with selective public URLs
#    - Quota: Consider setting storage quota
#
# 3. alecia-colab
#    - Purpose: Collaborative workspace document storage
#    - Access: Private (user-specific permissions)
#    - Lifecycle: Consider retention policies for old documents
#
# 4. alecia-sign
#    - Purpose: DocuSeal document signing storage
#    - Access: Private (high security)
#    - Encryption: Enable bucket encryption at rest
#
# Bucket creation (MinIO Client):
# mc alias set myminio http://localhost:9000 alecia password
# mc mb myminio/strapi-uploads
# mc mb myminio/alecia-uploads
# mc mb myminio/alecia-colab
# mc mb myminio/alecia-sign
# ==============================================================================

# ==============================================================================
# SECURITY BEST PRACTICES
# ==============================================================================
# - Use strong, randomly generated passwords (minimum 32 characters)
# - Create service-specific access keys instead of using root credentials
# - Enable bucket encryption at rest for sensitive data
# - Use HTTPS in production (configure TLS certificates)
# - Regularly rotate access keys and passwords
# - Enable audit logging to track access
# - Set appropriate bucket policies (least privilege principle)
# - Use versioning for important buckets (backup/recovery)
# - Configure bucket lifecycle policies to clean up old data
# - Monitor storage usage and set quotas
# - Regularly update MinIO to latest stable version
# ==============================================================================

# ==============================================================================
# INTEGRATION WITH OTHER SERVICES
# ==============================================================================
# Services using MinIO in AleciaSuite:
#
# 1. Strapi CMS:
#    - Env vars: AWS_ACCESS_KEY_ID, AWS_ACCESS_SECRET, AWS_ENDPOINT, AWS_BUCKET
#    - Bucket: strapi-uploads
#
# 2. Website App:
#    - Env vars: MINIO_ENDPOINT, MINIO_ACCESS_KEY, MINIO_SECRET_KEY, MINIO_BUCKET
#    - Bucket: alecia-uploads
#
# 3. Colab App:
#    - Env vars: MINIO_ENDPOINT, MINIO_ROOT_USER, MINIO_ROOT_PASSWORD, MINIO_BUCKET
#    - Bucket: alecia-colab
#
# 4. DocuSeal:
#    - Env vars: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_ENDPOINT, AWS_BUCKET
#    - Bucket: alecia-sign
#
# TIP: Use MinIO Console > Identity > Service Accounts to create dedicated
# access keys for each service instead of sharing root credentials.
# ==============================================================================
